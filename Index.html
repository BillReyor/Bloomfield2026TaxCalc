<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bloomfield Property Tax Estimator</title>
  <!-- Tailwind CSS via CDN for styling -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">
  <div class="max-w-xl mx-auto p-6">
    <!-- Title -->
    <h1 class="text-2xl font-bold text-center mb-4">Bloomfield, CT Property Tax Estimator</h1>

    <!-- Description -->
    <p class="mb-6 text-gray-700">
      Enter your property’s most recent assessed value and other details to estimate your annual residential property tax in Bloomfield, Connecticut.
      This assumes you’re already looking at the most up-to-date assessment after any revaluations or phase-ins.
      <strong>Note:</strong> Assessed value is 70% of market value, per Connecticut law.
    </p>

    <!-- Input Form -->
    <div class="bg-white shadow-md rounded p-4 mb-4">
      <!-- Current Assessed Value -->
      <label for="currentValue" class="block font-medium mb-1">
        Current Assessed Value
      </label>
      <input
        type="number"
        id="currentValue"
        class="w-full mb-3 p-2 border border-gray-300 rounded"
        placeholder="e.g. 180000"
      />

      <!-- Town Mill Rate -->
      <label for="townMill" class="block font-medium mb-1">
        Town Mill Rate
      </label>
      <input
        type="number"
        id="townMill"
        class="w-full mb-3 p-2 border border-gray-300 rounded"
        placeholder="e.g. 35.64"
        step="0.01"
      />

      <!-- Fire District Mill Rate -->
      <label for="fireMill" class="block font-medium mb-1">
        Fire District Mill Rate
      </label>
      <input
        type="number"
        id="fireMill"
        class="w-full mb-3 p-2 border border-gray-300 rounded"
        placeholder="e.g. 2.50 (if applicable)"
        step="0.01"
      />

      <!-- Total Exemptions/Deductions -->
      <label for="exemptions" class="block font-medium mb-1">
        Total Exemptions/Deductions (Assessed Value)
      </label>
      <input
        type="number"
        id="exemptions"
        class="w-full mb-4 p-2 border border-gray-300 rounded"
        placeholder="e.g. 3000 (veteran exemption, etc)"
      />

      <!-- Calculate Button -->
      <button
        id="calcBtn"
        class="w-full bg-blue-600 text-white font-semibold py-2 rounded hover:bg-blue-700"
      >
        Calculate Tax
      </button>
    </div>

    <!-- Result Display -->
    <div id="result" class="text-lg font-medium text-blue-800"></div>
  </div>

  <!-- JavaScript for calculation -->
  <script>
    // Grab references to each input field and result container
    const currentInput = document.getElementById('currentValue');
    const townMillInput = document.getElementById('townMill');
    const fireMillInput = document.getElementById('fireMill');
    const exemptionsInput = document.getElementById('exemptions');
    const resultDiv = document.getElementById('result');
    const calcBtn = document.getElementById('calcBtn');

    // Provide sensible defaults for mill rates; adjust these as needed each year
    townMillInput.value = 35.64; // Example town mill rate for FY2026
    fireMillInput.value = 0;     // Default to 0 unless you know your fire district rate

    function calculateTax() {
      // Parse user-entered values
      const assessedVal = parseFloat(currentInput.value);
      const townRate = parseFloat(townMillInput.value) || 0;
      const fireRate = parseFloat(fireMillInput.value) || 0;
      const exemptAmt = parseFloat(exemptionsInput.value) || 0;

      // Validate that the assessed value is a positive number
      if (isNaN(assessedVal) || assessedVal <= 0) {
        resultDiv.textContent = 'Please enter a valid assessed value.';
        return;
      }

      // Subtract exemptions from assessed value (but don’t go below zero)
      let netAssessed = assessedVal - exemptAmt;
      if (netAssessed < 0) netAssessed = 0;

      // Compute total mill rate (town + fire district)
      const totalMillRate = townRate + fireRate;

      // Property tax formula: (net assessed value × total mills) ÷ 1,000
      const estimatedTax = (netAssessed * totalMillRate) / 1000;

      // Show result, formatted to two decimal places
      resultDiv.textContent =
        'Estimated Annual Property Tax: $' + estimatedTax.toFixed(2) +
        (exemptAmt > 0 ? ' (after exemptions)' : '');
    }

    // Run calculation when the "Calculate Tax" button is clicked
    calcBtn.addEventListener('click', calculateTax);
  </script>
</body>
</html>
